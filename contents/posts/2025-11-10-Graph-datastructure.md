# Graph
## åŸºç¡€çŸ¥è¯†
- **å®šä¹‰ï¼ˆé’ˆå¯¹æ— å‘å›¾ï¼‰**

  - å›¾ï¼šç”±é¡¶ç‚¹ï¼ˆæˆ–ç§°ä¸ºèŠ‚ç‚¹ï¼‰çš„é›†åˆå’Œè¿æ¥é¡¶ç‚¹çš„è¾¹çš„é›†åˆç»„æˆ
  - æ— å‘å›¾ï¼šï¼šè¾¹æ²¡æœ‰æ–¹å‘ï¼Œå³å¦‚æœé¡¶ç‚¹Aå’ŒBä¹‹é—´æœ‰ä¸€æ¡è¾¹ï¼Œå¯ä»¥ä»Aèµ°åˆ°Bï¼Œä¹Ÿå¯ä»¥ä»Bèµ°åˆ°A
  - éè¿é€šå›¾ï¼šä¸€ä¸ªéè¿é€šå›¾å¯ä»¥è¢«åˆ’åˆ†ä¸ºä¸¤ä¸ªæˆ–æ›´å¤šä¸ªè¿é€šåˆ†é‡
    - è¿é€šåˆ†é‡ï¼šä¸€ä¸ªå›¾ä¸­çš„ä¸€ä¸ªæœ€å¤§è¿é€šå­å›¾ï¼Œæœ€å¤§æ„å‘³ç€æ— æ³•å†åŠ å…¥å¦ä¸€ä¸ªé¡¶ç‚¹è€Œä¸ç ´åå…¶è¿é€šæ€§
- **å®šä¹‰ï¼ˆé’ˆå¯¹æœ‰å‘å›¾ï¼‰**
  - å¼ºè¿é€šå›¾ï¼šåœ¨æœ‰å‘å›¾ä¸­ï¼Œå¦‚æœå¯¹äºä»»æ„ä¸¤ä¸ªé¡¶ç‚¹uå’Œvï¼Œéƒ½å­˜åœ¨ä¸€æ¡ä» u åˆ° v çš„è·¯å¾„ï¼ŒåŒæ—¶ä¹Ÿå­˜åœ¨ä¸€æ¡ä» v åˆ° u çš„è·¯å¾„ï¼Œé‚£ä¹ˆè¿™ä¸ªæœ‰å‘å›¾æ˜¯å¼ºè¿é€šçš„
    - è¦æ±‚éå¸¸ä¸¥æ ¼ï¼šä»»æ„ä¸¤ç‚¹å¿…é¡»â€œåŒå‘å¯è¾¾â€
  - å¼±è¿é€šå›¾ï¼šå¦‚æœä¸€ä¸ªæœ‰å‘å›¾å¿½ç•¥æ‰€æœ‰è¾¹çš„æ–¹å‘åï¼Œå½¢æˆçš„æ— å‘å›¾æ˜¯è¿é€šçš„ï¼Œé‚£ä¹ˆåŸå›¾è¢«ç§°ä¸ºå¼±è¿é€šçš„
    - è¦æ±‚å®½æ¾ï¼šåªè¦æ±‚â€œæœ‰è¿æ¥â€ï¼Œä¸è¦æ±‚â€œåŒå‘å¯è¾¾â€




- **æ¬§æ‹‰å®šç†**
  - æ¬§æ‹‰å›è·¯çš„åˆ¤å®šå®šç†ï¼šä¸€ä¸ªè¿é€šçš„æ— å‘å›¾ GG å­˜åœ¨æ¬§æ‹‰å›è·¯ï¼Œå½“ä¸”ä»…å½“è¯¥å›¾ä¸­æ¯ä¸ªé¡¶ç‚¹çš„åº¦ï¼ˆä¸è¯¥é¡¶ç‚¹ç›¸è¿çš„è¾¹çš„æ•°ç›®ï¼‰éƒ½æ˜¯å¶æ•°ã€‚
  - æ¬§æ‹‰è·¯å¾„ï¼ˆæ¬§æ‹‰è¿¹ï¼‰çš„åˆ¤å®šå®šç†ï¼šä¸€ä¸ªè¿é€šçš„æ— å‘å›¾ GG å­˜åœ¨æ¬§æ‹‰è·¯å¾„ï¼ˆä½†ä¸æ˜¯å›è·¯ï¼‰ï¼Œå½“ä¸”ä»…å½“è¯¥å›¾ä¸­æ°å¥½æœ‰ä¸¤ä¸ªé¡¶ç‚¹çš„åº¦æ˜¯å¥‡æ•°ï¼Œå…¶ä½™æ‰€æœ‰é¡¶ç‚¹çš„åº¦éƒ½æ˜¯å¶æ•°ã€‚
  - è¿é€šå›¾ï¼šåœ¨å›¾è®ºä¸­ï¼Œä¸€ä¸ªè¿é€šå›¾æ˜¯æŒ‡åœ¨ä¸€ä¸ªæ— å‘å›¾ä¸­ï¼Œä»»æ„ä¸¤ä¸ªé¡¶ç‚¹ä¹‹é—´éƒ½å­˜åœ¨ä¸€æ¡è·¯å¾„ã€‚





## æ³¨æ„äº‹é¡¹
1. **æ··æ·†ç‚¹**
- **é¡¶ç‚¹é‡å¤è®¿é—® vs è¾¹é‡å¤è®¿é—®**


|ç®—æ³•ç±»å‹	|é™åˆ¶æ¡ä»¶	|æ•°æ®ç»“æ„|	åº”ç”¨åœºæ™¯|
---|---|---|---
|DFS/BFSéå†|	é¡¶ç‚¹ä¸é‡å¤è®¿é—®|	visited_vertices = set()	|æ¢ç´¢å›¾çš„ç»“æ„|
|æ¬§æ‹‰è·¯å¾„	|è¾¹ä¸é‡å¤è®¿é—®|	ä»é‚»æ¥è¡¨ä¸­åˆ é™¤è¾¹	|ä¸€ç¬”ç”»é—®é¢˜|
|å“ˆå¯†é¡¿è·¯å¾„	|é¡¶ç‚¹ä¸é‡å¤è®¿é—®|	visited_vertices = set()	|æ—…è¡Œå•†é—®é¢˜å˜ç§|




2. **ä»£ç å®ç°**
```
class Graph {
    //===========åŸºç¡€ä¸´æ¥è¡¨çš„å®ç°===========//
    constructor() {
        //1: åˆå§‹åŒ–ä¸€ä¸ªé‚»æ¥è¡¨æ¥å­˜å‚¨å›¾
        this.adjacencyList = {};
        /*é‚»æ¥è¡¨å°±æ˜¯ï¼šä¸ºæ¯ä¸ªé¡¶ç‚¹ç»´æŠ¤ä¸€ä¸ªåˆ—è¡¨ï¼Œè®°å½•å®ƒç›´æ¥è¿æ¥çš„æ‰€æœ‰ç‚¹ã€‚çœç©ºé—´ï¼šåªå­˜å®é™…å­˜åœ¨çš„è¾¹,é«˜æ•ˆéå†ï¼šæ‰¾æŸä¸ªé¡¶ç‚¹çš„æ‰€æœ‰é‚»å±…å¾ˆå¿«ï¼›ç¬¦åˆç°å®ã€‚
        åŸºç¡€çš„é‚»æ¥è¡¨ç¡®å®åªè®°å½•äº†è¿æ¥å…³ç³»ï¼Œä½†ä¸¢å¤±äº†è¾¹çš„å…¶ä»–ä¿¡æ¯ã€‚æˆ‘ä»¬å¯ä»¥è½»æ¾åœ°æ‰©å±•å®ƒæ¥è®°å½•æ‰€æœ‰éœ€è¦çš„ä¿¡æ¯ã€‚
        */

    }

    addVertex(vertex) {
        //2: å¦‚æœé¡¶ç‚¹ä¸å­˜åœ¨äºé‚»æ¥è¡¨ä¸­ï¼Œåˆ™åˆå§‹åŒ–å®ƒçš„é‚»å±…åˆ—è¡¨
         if (!this.adjacencyList[vertex]) {
            this.adjacencyList[vertex] = [];
        }
    }

    addEdge(vertex1, vertex2) {
         //3: ä½¿ç”¨pushæ–¹æ³•äº’ç›¸æ·»åŠ é‚»å±…
        this.adjacencyList[vertex1].push(vertex2);
        this.adjacencyList[vertex2].push(vertex1);
    }

    getDegree(vertex) {
         //4: æ•°ç»„çš„lengthå°±æ˜¯åº¦æ•°
        return this.adjacencyList[vertex].length;
    }
3
    hasEulerianPath() {
        let oddDegreeCount = 0;
        
        //5: éå†æ‰€æœ‰é¡¶ç‚¹ï¼Œç»Ÿè®¡å¥‡åº¦é¡¶ç‚¹çš„æ•°é‡
        for (let vertex in this.adjacencyList) {
            if (this.getDegree(vertex) % 2 !== 0) {
                oddDegreeCount++;
            }
        }
        
        //6: æ¬§æ‹‰è·¯å¾„å­˜åœ¨çš„æ¡ä»¶å½“å¥‡åº¦é¡¶ç‚¹æ•°ä¸º0æˆ–2
        return oddDegreeCount === 0 || oddDegreeCount === 2;
    }

    // è¿›é˜¶æŒ‘æˆ˜ï¼šæ‰¾åˆ°ä¸€æ¡æ¬§æ‹‰è·¯å¾„çš„èµ·ç‚¹
    findEulerPathStart() {
        let oddVertices = [];
        
        for (let vertex in this.adjacencyList) {
            if (this.getDegree(vertex) % 2 !== 0) {
                oddVertices.push(vertex);
            }
        }
        
        //7: å¦‚æœæœ‰ä¸¤ä¸ªå¥‡åº¦é¡¶ç‚¹ï¼Œè¿”å›å…¶ä¸­ä¸€ä¸ªï¼›å¦åˆ™è¿”å›ä»»æ„é¡¶ç‚¹
        if (oddVertices.length === 2) {
            return oddVertices[0];
        } else {
            return Object.keys(this.adjacencyList)[0]; // è¿”å›ç¬¬ä¸€ä¸ªé¡¶ç‚¹
        }
    }
}

// æµ‹è¯•ä»£ç 
/*ğŸ‘‰åŸºç¡€é‚»æ¥è¡¨å®ç°æ— æ³•æ­£ç¡®å¤„ç†å¹³è¡Œè¾¹ï¼Œé—®é¢˜æ ¹æºï¼šå¹³è¡Œè¾¹çš„é‡å¤è®¡æ•°
Açš„é‚»å±…åˆ—è¡¨ï¼š['B', 'C', 'C'] â†’ é•¿åº¦=3ï¼›Cçš„é‚»å±…åˆ—è¡¨ï¼š['A', 'A', 'B', 'D', 'D'] â†’ é•¿åº¦=5
*/
const graph01 = new Graph();

//æ·»åŠ é¡¶ç‚¹ A, B, C, D
['A', 'B', 'C', 'D'].forEach(vertex => {
    graph.addVertex(vertex);
});

//æ·»åŠ è¾¹åˆ›å»ºæˆ‘ä»¬çš„"å—æåŒ—æ"æ¨¡å‹
// A(åº¦3) -- B(åº¦3) å’Œ C(åº¦4) -- D(åº¦2)
graph.addEdge('A', 'B');
graph.addEdge('A', 'C');
graph.addEdge('A', 'C'); // å¹³è¡Œè¾¹è®©Açš„åº¦å˜ä¸º3
graph.addEdge('B', 'C');
graph.addEdge('B', 'D');
graph.addEdge('C', 'D');
graph.addEdge('C', 'D'); // å¹³è¡Œè¾¹è®©Cçš„åº¦å˜ä¸º4

console.log("é¡¶ç‚¹åº¦æ•°:");
//æ‰“å°æ¯ä¸ªé¡¶ç‚¹çš„åº¦æ•°
for (let vertex in graph.adjacencyList) {
    console.log(`é¡¶ç‚¹ ${vertex}: åº¦ = ${graph.getDegree(vertex)}`);
}

console.log(`æ˜¯å¦å­˜åœ¨æ¬§æ‹‰è·¯å¾„: ${graph.hasEulerianPath()}`);
console.log(`æ¬§æ‹‰è·¯å¾„èµ·ç‚¹: ${graph.findEulerPathStart()}`);


 
 //========è¾¹ç±»ï¼šå­˜å‚¨è¾¹çš„å®Œæ•´ä¿¡æ¯-"è¾¹å¯¹è±¡é‚»æ¥è¡¨"=========//
class Edge {
    constructor(id, from, to, weight = 1, attributes = {}) {
        this.id = id;// æ ¸å¿ƒ1: å”¯ä¸€æ ‡è¯† âœ…ç²¾ç¡®æ“ä½œï¼šå¯ä»¥å•ç‹¬åˆ é™¤ã€æ›´æ–°æŸæ¡è¾¹è·Ÿè¸ªå˜åŒ–âœ…è®°å½•è¾¹çš„åˆ›å»ºã€ä¿®æ”¹å†å²æ•°æ®å…³ç³»âœ…åœ¨æ•°æ®åº“ä¸­ä½œä¸ºä¸»é”®
        this.from = from;// æ ¸å¿ƒ2: èµ·ç‚¹å¼•ç”¨âœ…from/to: é¡¶ç‚¹å¼•ç”¨ï¼Œç”¨å¯¹è±¡å¼•ç”¨å¯ä»¥ç›´æ¥è®¿é—®ç”¨æˆ·æ•°æ®
        this.to = to;// æ ¸å¿ƒ3: ç»ˆç‚¹å¼•ç”¨
        this.weight = weight;// æ ¸å¿ƒ4: æƒé‡æ•°å€¼âœ…ä¸åªæ˜¯"è·ç¦»"ï¼Œè€Œæ˜¯"å…³ç³»å¼ºåº¦"çš„é‡åŒ–
        this.attributes = {// æ‰©å±•: ä¸šåŠ¡å±æ€§å®¹å™¨âœ…å¯æ‰©å±•çš„ä¸šåŠ¡æ•°æ®âœ…å¤æ‚çš„è¾¹ä¿¡æ¯ï¼šç¤¾äº¤ç½‘ç»œåˆ†æï¼Œç‰©æµè·¯å¾„è§„åˆ’âœ…attributes çš„è®¾è®¡ä½“ç°äº† "å¼€é—­åŸåˆ™"ï¼šå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚
            type: 'default',
            created: new Date(),
            ...attributes
        };
        
    }
}

// é‚»æ¥é¡¹ç±»ï¼šç®¡ç†åˆ°ä¸€ä¸ªé‚»å±…çš„æ‰€æœ‰è¾¹
class AdjacencyItem {
    constructor(neighbor) {
        this.neighbor = neighbor;
        this.edges = [];
    }
    
    addEdge(edge) {
        this.edges.push(edge);
    }
    
    getEdgeCount() {
        return this.edges.length;
    }
}

// ä¸»å›¾ç±»
class ProfessionalGraph {
    constructor() {
        this.adjacencyList = {};
        this.edges = new Map();//è¾¹ä»“åº“
        this.vertices = new Map();//ä¸“ä¸šé¡¶ç‚¹ä»“åº“
        /*Mapä¼˜åŠ¿
        ä¼˜åŠ¿1ï¼šé”®å¯ä»¥æ˜¯ä»»ä½•ç±»å‹ï¼ŒMapçš„é”®å¯ä»¥æ˜¯ä»»æ„ç±»å‹ä¼˜åŠ¿2ï¼šä¿æŒæ’å…¥é¡ºåºä¼˜åŠ¿3ï¼šæ€§èƒ½ä¼˜åŒ–ï¼Œå¤§é‡æ•°æ®æ—¶ï¼ŒMapçš„å¢åˆ æ”¹æŸ¥æ€§èƒ½æ›´å¥½ä¼˜åŠ¿4ï¼šå®‰å…¨çš„é”®å
        */
    }
    
    addVertex(vertex, data = {}) {
        if (!this.adjacencyList[vertex]) {
            this.adjacencyList[vertex] = [];
        }
        this.vertices.set(vertex, data);//set() çš„ä¸‰å¤§ç‰¹æ€§ç‰¹æ€§1ï¼šé”®å€¼å¯¹å­˜å‚¨ï¼Œç‰¹æ€§2ï¼šè‡ªåŠ¨æ›´æ–°ï¼ˆå¹‚ç­‰æ€§ï¼‰ï¼Œç‰¹æ€§3ï¼šé“¾å¼è°ƒç”¨
    }
    
    addEdge(edgeId, from, to, weight = 1, attributes = {}) {
        const edge = new Edge(edgeId, from, to, weight, attributes);
        this.edges.set(edgeId, edge);
        //ä¿è¯èµ·ç‚¹å’Œç»ˆç‚¹éƒ½å­˜åœ¨ï¼//é˜²å¾¡æ€§ç¼–ç¨‹" å’Œ "æ•°æ®ä¸€è‡´æ€§ä¿è¯" çš„ä¸“ä¸šæ€æƒ³
        this.addVertex(from);// å¦‚æœfromä¸å­˜åœ¨ï¼Œå°±åˆ›å»ºå®ƒ
        this.addVertex(to);// å¦‚æœtoä¸å­˜åœ¨ï¼Œå°±åˆ›å»ºå®ƒ
        // ç°åœ¨å¯ä»¥å®‰å…¨åœ°æ·»åŠ è¾¹äº†// ... æ·»åŠ è¾¹çš„é€»è¾‘
        let fromItem = this.adjacencyList[from].find(item => item.neighbor === to);
        if (!fromItem) {
            fromItem = new AdjacencyItem(to);
            this.adjacencyList[from].push(fromItem);
        }
        fromItem.addEdge(edge);
        //"æ™ºèƒ½è¿æ¥ç®¡ç†" çš„è®¾è®¡æ€æƒ³ï¼šé—®é¢˜ï¼šå¹³è¡Œè¾¹çš„ç®¡ç†ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªè®¾è®¡ï¼Œå¤„ç†å¹³è¡Œè¾¹ä¼šå¾ˆæ··ä¹±
        //âœ¨ä¸ºæ¯å¯¹é¡¶ç‚¹ä¹‹é—´çš„è¿æ¥å»ºç«‹ä¸€ä¸ªä¸“é—¨çš„ç®¡ç†å•å…ƒï¼ˆAdjacencyItemï¼‰ï¼Œåœ¨è¿™ä¸ªå•å…ƒå†…ç²¾ç»†ç®¡ç†æ‰€æœ‰çš„è¾¹"
        let toItem = this.adjacencyList[to].find(item => item.neighbor === from);
        if (!toItem) {
            toItem = new AdjacencyItem(from);
            this.adjacencyList[to].push(toItem);
        }
        toItem.addEdge(edge);
        
        return edge;
    }
    //ç²¾ç¡®ç»Ÿè®¡ä¸€ä¸ªé¡¶ç‚¹è¿æ¥çš„æ‰€æœ‰è¾¹çš„æ•°é‡
    getDegree(vertex) {
        let totalEdges = 0; // ä»0å¼€å§‹è®¡æ•°
        for (let item of this.adjacencyList[vertex]) {// éå†è¿™ä¸ªé¡¶ç‚¹çš„æ‰€æœ‰"é‚»å±…å…³ç³»æ¡£æ¡ˆ"
            totalEdges += item.getEdgeCount();// æ¯ä¸ªæ¡£æ¡ˆé‡Œå¯èƒ½æœ‰å¤šä¸ªè¾¹ï¼ˆå¹³è¡Œè¾¹ï¼‰
        }
        return totalEdges;// è¿”å›æ€»è¾¹æ•°
    }
    
    hasEulerianPath() {
        let oddDegreeCount = 0;
        for (let vertex in this.adjacencyList) {
            if (this.getDegree(vertex) % 2 !== 0) {
                oddDegreeCount++;
            }
        }
        return oddDegreeCount === 0 || oddDegreeCount === 2;
    }
    
    // æ‰“å°æ‰€æœ‰é¡¶ç‚¹ä¿¡æ¯
    printAllVerticesInfo() {
        console.log("=== æ‰€æœ‰é¡¶ç‚¹è¯¦ç»†ä¿¡æ¯ ===");
        for (let vertex in this.adjacencyList) {
            const degree = this.getDegree(vertex);
            const parity = degree % 2 === 0 ? 'å¶æ•°' : 'å¥‡æ•°';
            
            console.log(`\né¡¶ç‚¹ "${vertex}": åº¦=${degree} (${parity})`);
            
            for (let item of this.adjacencyList[vertex]) {
                console.log(`  â†’ åˆ° "${item.neighbor}": ${item.getEdgeCount()} æ¡è¾¹`);
                item.edges.forEach(edge => {
                    console.log(`    è¾¹ ${edge.id}: ${edge.from} â†” ${edge.to}`);
                });
            }
        }
    }
    
    printGraph() {
        this.printAllVerticesInfo();
        
        console.log(`\n=== å›¾ç»Ÿè®¡ä¿¡æ¯ ===`);
        console.log(`æ€»è¾¹æ•°: ${this.edges.size}`);
        console.log(`æ€»é¡¶ç‚¹æ•°: ${Object.keys(this.adjacencyList).length}`);
        console.log(`æ˜¯å¦å­˜åœ¨æ¬§æ‹‰è·¯å¾„: ${this.hasEulerianPath()}`);
        
        // åˆ†æåº¦æ•°åˆ†å¸ƒ
        const degrees = {};
        for (let vertex in this.adjacencyList) {
            degrees[vertex] = this.getDegree(vertex);
        }
        console.log(`åº¦æ•°åˆ†å¸ƒ:`, degrees);
    }
}

// ========== æ‰§è¡Œéƒ¨åˆ† - åˆ›å»º2-3-3-4åº¦æ•°åˆ†å¸ƒ ==========
console.log("å¼€å§‹åˆ›å»º2-3-3-4åº¦æ•°åˆ†å¸ƒçš„å›¾...");

// åˆ›å»ºå›¾å®ä¾‹
const graph02 = new ProfessionalGraph();

// æ·»åŠ å››ä¸ªé¡¶ç‚¹ï¼šA, B, C, D
graph.addVertex('A', {type: 'åŒ—å²¸'});
graph.addVertex('B', {type: 'å·¦å²›'});  
graph.addVertex('C', {type: 'å³å²›'});
graph.addVertex('D', {type: 'å—å²¸'});

console.log("é¡¶ç‚¹æ·»åŠ å®Œæˆ");

// åˆ›å»º 2-3-3-4 çš„åº¦æ•°åˆ†å¸ƒï¼š
// Aåº¦=2, Båº¦=3, Cåº¦=3, Dåº¦=4

// æ·»åŠ è¾¹æ¥å®ç°ç›®æ ‡åº¦æ•°ï¼š
graph.addEdge('e1', 'A', 'B', 1, {type: 'æ¡¥'});  // A:1, B:1
console.log("æ·»åŠ è¾¹ e1: A-B");

graph.addEdge('e2', 'A', 'C', 1, {type: 'æ¡¥'});  // A:2, B:1, C:1
console.log("æ·»åŠ è¾¹ e2: A-C");

graph.addEdge('e3', 'B', 'C', 1, {type: 'æ¡¥'});  // A:2, B:2, C:2
console.log("æ·»åŠ è¾¹ e3: B-C");

graph.addEdge('e4', 'B', 'D', 1, {type: 'æ¡¥'});  // A:2, B:3, C:2, D:1
console.log("æ·»åŠ è¾¹ e4: B-D");

graph.addEdge('e5', 'C', 'D', 1, {type: 'æ¡¥'});  // A:2, B:3, C:3, D:2
console.log("æ·»åŠ è¾¹ e5: C-D");

// ç°åœ¨åº¦æ•°æ˜¯2-3-3-2ï¼Œéœ€è¦è®©Då˜æˆ4
// æ·»åŠ Dçš„è‡ªç¯ï¼ˆè‡ªç¯åœ¨åº¦æ•°è®¡ç®—ä¸­ç®—ä½œ2åº¦ï¼‰ğŸ‘‰è‡ªç¯å°±æ˜¯ä¸€æ¡è¾¹è¿æ¥åŒä¸€ä¸ªé¡¶ç‚¹ï¼Œè‡ªç¯å¯¹åº¦æ•°çš„è´¡çŒ®æ˜¯2è‡ªç¯æ”¹å˜äº†åº¦æ•°åˆ†å¸ƒï¼Œä»è€Œå½±å“æ¬§æ‹‰è·¯å¾„çš„å­˜åœ¨æ€§
graph.addEdge('e6', 'D', 'D', 1, {type: 'è‡ªç¯'});  // A:2, B:3, C:3, D:4
console.log("æ·»åŠ è‡ªç¯è¾¹ e6: D-D");

// æ‰“å°å®Œæ•´çš„å›¾ä¿¡æ¯
console.log("\nç”Ÿæˆå›¾ç»“æ„...");
graph.printGraph();

// éªŒè¯åº¦æ•°
console.log("\n=== åº¦æ•°éªŒè¯ ===");
console.log(`Açš„åº¦æ•°: ${graph.getDegree('A')} (ç›®æ ‡: 2)`);
console.log(`Bçš„åº¦æ•°: ${graph.getDegree('B')} (ç›®æ ‡: 3)`);  
console.log(`Cçš„åº¦æ•°: ${graph.getDegree('C')} (ç›®æ ‡: 3)`);
console.log(`Dçš„åº¦æ•°: ${graph.getDegree('D')} (ç›®æ ‡: 4)`);

// åˆ†ææ¬§æ‹‰è·¯å¾„æ¡ä»¶
console.log("\n=== æ¬§æ‹‰è·¯å¾„åˆ†æ ===");
let oddDegreeCount = 0;
let oddVertices = [];
for (let vertex in graph.adjacencyList) {
    const degree = graph.getDegree(vertex);
    if (degree % 2 !== 0) {
        oddDegreeCount++;
        oddVertices.push(vertex);
    }
}
console.log(`å¥‡åº¦é¡¶ç‚¹æ•°: ${oddDegreeCount}`);
console.log(`å¥‡åº¦é¡¶ç‚¹: ${oddVertices.join(', ')}`);
console.log(`å­˜åœ¨æ¬§æ‹‰è·¯å¾„: ${oddDegreeCount === 0 || oddDegreeCount === 2}`);

if (oddDegreeCount === 2) {
    console.log(`âœ“ æ¬§æ‹‰è·¯å¾„å¿…é¡»ä» ${oddVertices[0]} å¼€å§‹ï¼Œåœ¨ ${oddVertices[1]} ç»“æŸ`);
} else {
    console.log(`âœ— æ— æ³•å½¢æˆæ¬§æ‹‰è·¯å¾„ï¼Œå¥‡åº¦é¡¶ç‚¹æ•°ä¸æ˜¯2`);
}

console.log("\n=== æœ€ç»ˆç»“æœ ===");
const degrees = {
    'A': graph.getDegree('A'),
    'B': graph.getDegree('B'),
    'C': graph.getDegree('C'),
    'D': graph.getDegree('D')
};
console.log(`å®ç°çš„åº¦æ•°åˆ†å¸ƒ: ${degrees.A}-${degrees.B}-${degrees.C}-${degrees.D}`);
console.log(`ç›®æ ‡åº¦æ•°åˆ†å¸ƒ: 2-3-3-4`);
console.log(`åŒ¹é…ç»“æœ: ${degrees.A === 2 && degrees.B === 3 && degrees.C === 3 && degrees.D === 4 ? 'âœ“ æˆåŠŸ' : 'âœ— å¤±è´¥'}`);
//==================ğŸ”„æ¬§æ‹‰å›è·¯å’Œè¿é€šå›¾===================//
//ğŸ“œæ¬§æ‹‰å›è·¯ï¼šä¸€æ¡ç»è¿‡å›¾ä¸­æ¯æ¡è¾¹æ°å¥½ä¸€æ¬¡ï¼Œå¹¶æœ€ç»ˆå›åˆ°èµ·ç‚¹çš„å›è·¯ï¼›æ¬§æ‹‰è·¯å¾„ï¼šä¸€æ¡ç»è¿‡å›¾ä¸­æ¯æ¡è¾¹æ°å¥½ä¸€æ¬¡ï¼Œä½†ä¸ä¸€å®šå›åˆ°èµ·ç‚¹çš„è·¯å¾„
ç±»å‹	    å¿…è¦æ¡ä»¶	                    èµ·ç‚¹ä¸ç»ˆç‚¹
æ¬§æ‹‰å›è·¯	å›¾è¿é€šï¼Œä¸”æ‰€æœ‰é¡¶ç‚¹çš„åº¦ä¸ºå¶æ•°	    èµ·ç‚¹ = ç»ˆç‚¹
æ¬§æ‹‰è·¯å¾„	å›¾è¿é€šï¼Œä¸”æ°å¥½ä¸¤ä¸ªé¡¶ç‚¹çš„åº¦ä¸ºå¥‡æ•°	 èµ·ç‚¹å’Œç»ˆç‚¹æ˜¯é‚£ä¸¤ä¸ªå¥‡åº¦é¡¶ç‚¹
//ğŸ“œæ¬§æ‹‰è·¯å¾„é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦çš„æ˜¯ï¼šæ¯æ¡è¾¹åªè®¿é—®ä¸€æ¬¡ï¼Œä½†é¡¶ç‚¹å¯ä»¥å¤šæ¬¡è®¿é—®
// è¾¹ç±»ï¼šå­˜å‚¨è¾¹çš„å®Œæ•´ä¿¡æ¯
class Edge {
    constructor(id, from, to, weight = 1, attributes = {}) {
        this.id = id;
        this.from = from;
        this.to = to;
        this.weight = weight;
        this.attributes = {
            type: 'default',
            created: new Date(),
            ...attributes
        };
    }
}

// é‚»æ¥é¡¹ç±»ï¼šç®¡ç†åˆ°ä¸€ä¸ªé‚»å±…çš„æ‰€æœ‰è¾¹
class AdjacencyItem {
    constructor(neighbor) {
        this.neighbor = neighbor;
        this.edges = [];
    }
    
    addEdge(edge) {
        this.edges.push(edge);
    }
    
    getEdgeCount() {
        return this.edges.length;
    }
}

// ä¸»å›¾ç±»
class ProfessionalGraph {
    constructor() {
        this.adjacencyList = {};
        this.edges = new Map();
        this.vertices = new Map();
    }
    
    addVertex(vertex, data = {}) {
        if (!this.adjacencyList[vertex]) {
            this.adjacencyList[vertex] = [];
        }
        this.vertices.set(vertex, {
            id: vertex,
            data: data,
            createdAt: new Date()
        });
    }
    
    addEdge(edgeId, from, to, weight = 1, attributes = {}) {
        // ç¡®ä¿é¡¶ç‚¹å­˜åœ¨
        this.addVertex(from);
        this.addVertex(to);
        
        const edge = new Edge(edgeId, from, to, weight, attributes);
        this.edges.set(edgeId, edge);
        
        // æ·»åŠ åˆ°fromçš„é‚»æ¥è¡¨
        let fromItem = this.adjacencyList[from].find(item => item.neighbor === to);
        if (!fromItem) {
            fromItem = new AdjacencyItem(to);
            this.adjacencyList[from].push(fromItem);
        }
        fromItem.addEdge(edge);
        
        // æ·»åŠ åˆ°toçš„é‚»æ¥è¡¨ï¼ˆæ— å‘å›¾ï¼‰
        let toItem = this.adjacencyList[to].find(item => item.neighbor === from);
        if (!toItem) {
            toItem = new AdjacencyItem(from);
            this.adjacencyList[to].push(toItem);
        }
        toItem.addEdge(edge);
        
        return edge;
    }
    
    getDegree(vertex) {
        let totalEdges = 0;
        for (let item of this.adjacencyList[vertex]) {
            if (item.neighbor === vertex) {
                // è‡ªç¯ï¼šæ¯æ¡è¾¹è´¡çŒ®2åº¦
                totalEdges += item.getEdgeCount() * 2;
            } else {
                // æ™®é€šè¾¹ï¼šæ¯æ¡è¾¹è´¡çŒ®1åº¦
                totalEdges += item.getEdgeCount();
            }
        }
        return totalEdges;
    }
    
    // æ£€æŸ¥å›¾æ˜¯å¦è¿é€š
    isConnected() {//æ·±åº¦ä¼˜å…ˆæœç´¢(DFS) æ¥æ£€æŸ¥å›¾æ˜¯å¦è¿é€š
        const vertices = Object.keys(this.adjacencyList);// ç¬¬ä¸€è¡Œï¼šè·å–å›¾ä¸­æ‰€æœ‰é¡¶ç‚¹çš„åˆ—è¡¨
        if (vertices.length === 0) return true;// ç¬¬äºŒè¡Œï¼šå¦‚æœå›¾æ˜¯ç©ºçš„ï¼Œé»˜è®¤ç®—è¿é€šï¼ˆè¾¹ç•Œæƒ…å†µï¼‰
        const visited = new Set();// ç¬¬ä¸‰è¡Œï¼šåˆ›å»º"å·²è®¿é—®æ ‡è®°"é›†åˆï¼Œè®°å½•èµ°è¿‡å“ªäº›åœ°æ–¹
        this._dfs(vertices[0], visited);//ç¬¬å››è¡Œï¼šä»ç¬¬ä¸€ä¸ªé¡¶ç‚¹å¼€å§‹"æ¢è·¯"ï¼ˆæ·±åº¦ä¼˜å…ˆæœç´¢ï¼‰
        return visited.size === vertices.length; // ç¬¬äº”è¡Œï¼šå¦‚æœè®¿é—®è¿‡çš„é¡¶ç‚¹æ•° = æ€»é¡¶ç‚¹æ•°ï¼Œè¯´æ˜æ•´ä¸ªå›¾æ˜¯è¿é€šçš„
    }
    //è¿é€šå›¾çš„å®šä¹‰ï¼š å›¾ä¸­ä»»æ„ä¸¤ä¸ªé¡¶ç‚¹ä¹‹é—´éƒ½å­˜åœ¨è·¯å¾„ã€‚ğŸ’¡ä»ä»»æ„ä¸€ä¸ªé¡¶ç‚¹å‡ºå‘ï¼Œå¦‚æœèƒ½é€šè¿‡DFSè®¿é—®åˆ°æ‰€æœ‰é¡¶ç‚¹ï¼Œè¯´æ˜æ‰€æœ‰é¡¶ç‚¹éƒ½æ˜¯è¿é€šçš„
    _dfs(vertex, visited) {
        visited.add(vertex);// æ ‡è®°å½“å‰é¡¶ç‚¹ä¸ºå·²è®¿é—®
        console.log(`è®¿é—®: ${vertex}`);
        for (let item of this.adjacencyList[vertex]) {// éå†å½“å‰é¡¶ç‚¹çš„æ‰€æœ‰é‚»å±…
            if (!visited.has(item.neighbor)) {//å¦‚æœé‚»å±…è¿˜æ²¡è®¿é—®è¿‡ï¼Œå°±å»è®¿é—®å®ƒ
                console.log(`ä» ${vertex} æ¢ç´¢åˆ° ${item.neighbor}`);
                this._dfs(item.neighbor, visited);
            }
        }
    }
    // è·å–æ‰€æœ‰è¿é€šåˆ†é‡ï¼Œæ·±å…¥ç†è§£å›¾çš„å†…éƒ¨ç»“æ„
    getConnectedComponents() {
        const visited = new Set();// ç¬¬ä¸€è¡Œï¼šè®°å½•å“ªäº›é¡¶ç‚¹å·²ç»"è¢«å‘ç°"äº†
        const components = [];// ç¬¬äºŒè¡Œï¼šå­˜å‚¨æ‰¾åˆ°çš„æ‰€æœ‰è¿é€šåˆ†é‡ï¼ˆå²›å±¿ç¾¤ï¼‰
        // ç¬¬ä¸‰è¡Œï¼šéå†å›¾ä¸­çš„æ¯ä¸€ä¸ªé¡¶ç‚¹
        for (let vertex in this.adjacencyList) {
            if (!visited.has(vertex)) {// ç¬¬å››è¡Œï¼šå¦‚æœè¿™ä¸ªé¡¶ç‚¹è¿˜æ²¡è¢«æ¢ç´¢è¿‡
                const component = new Set();// ç¬¬äº”è¡Œï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„"å²›å±¿ç¾¤"å®¹å™¨
                this._dfs(vertex, component);// ç¬¬å…­è¡Œï¼šä»è¿™ä¸ªé¡¶ç‚¹å¼€å§‹DFSï¼Œæ¢ç´¢æ•´ä¸ªè¿é€šåˆ†é‡
                components.push(Array.from(component));// ç¬¬ä¸ƒè¡Œï¼šæŠŠè¿™ä¸ªè¿é€šåˆ†é‡è½¬æ¢æˆæ•°ç»„ï¼ŒåŠ å…¥åˆ°ç»“æœä¸­
                // ç¬¬å…«è¡Œï¼šæŠŠè¿™ä¸ªè¿é€šåˆ†é‡é‡Œçš„æ‰€æœ‰é¡¶ç‚¹æ ‡è®°ä¸ºå·²è®¿é—®
                for (let v of component) {
                    visited.add(v);
                }
            }
        }
        // ç¬¬ä¹è¡Œï¼šè¿”å›æ‰€æœ‰æ‰¾åˆ°çš„è¿é€šåˆ†é‡
        return components;
    }
/*isConnected() {
    const vertices = Object.keys(this.adjacencyList);  // O(V)
    if (vertices.length === 0) return true;
    const visited = new Set();
    this._dfs(vertices[0], visited);  // O(V + E) - éå†æ‰€æœ‰é¡¶ç‚¹å’Œè¾¹
    return visited.size === vertices.length;  // O(1)
}
æ€»æ—¶é—´å¤æ‚åº¦ï¼šO(V + E)//
æ–¹æ³•	                           ç›®çš„	       è¿”å›å€¼	          åº”ç”¨åœºæ™¯
isConnected()	            æ£€æŸ¥æ•´ä¸ªå›¾æ˜¯å¦è¿é€š	boolean      	å¿«é€Ÿåˆ¤æ–­è¿é€šæ€§
getConnectedComponents()	æ‰¾å‡ºæ‰€æœ‰è¿é€šåˆ†é‡	Array<Array>	è¯¦ç»†åˆ†æå›¾ç»“æ„
*/
    // å®Œæ•´çš„æ¬§æ‹‰è·¯å¾„æ£€æŸ¥
    hasEulerianPath() {
        if (!this.isConnected()) {
            console.log("âŒ å›¾ä¸è¿é€šï¼Œä¸å­˜åœ¨æ¬§æ‹‰è·¯å¾„");
            return false;
        }
        
        let oddDegreeCount = 0;
        for (let vertex in this.adjacencyList) {
            const degree = this.getDegree(vertex);
            if (degree % 2 !== 0) {
                oddDegreeCount++;
            }
        }
        
        const result = oddDegreeCount === 0 || oddDegreeCount === 2;
        if (result) {
            console.log(`âœ“ å­˜åœ¨æ¬§æ‹‰è·¯å¾„ï¼ˆå¥‡åº¦é¡¶ç‚¹æ•°: ${oddDegreeCount}ï¼‰`);
        } else {
            console.log(`âŒ ä¸å­˜åœ¨æ¬§æ‹‰è·¯å¾„ï¼ˆå¥‡åº¦é¡¶ç‚¹æ•°: ${oddDegreeCount}ï¼Œéœ€è¦0æˆ–2ï¼‰`);
        }
        return result;
    }
    
    // æ£€æŸ¥æ¬§æ‹‰å›è·¯
    hasEulerianCircuit() {
         // å¿…é¡»å…ˆæ£€æŸ¥è¿é€šæ€§ï¼
        if (!this.isConnected()) {
            console.log("âŒ å›¾ä¸è¿é€šï¼Œä¸å­˜åœ¨æ¬§æ‹‰å›è·¯");
            return false;
        }
        // å†æ£€æŸ¥åº¦æ•°æ¡ä»¶
        for (let vertex in this.adjacencyList) {
            if (this.getDegree(vertex) % 2 !== 0) {
                console.log(`âŒ é¡¶ç‚¹ ${vertex} çš„åº¦æ•°ä¸ºå¥‡æ•°ï¼Œä¸å­˜åœ¨æ¬§æ‹‰å›è·¯`);
                return false;
            }
        }
        
        console.log("âœ“ å­˜åœ¨æ¬§æ‹‰å›è·¯ï¼ˆæ‰€æœ‰é¡¶ç‚¹åº¦æ•°ä¸ºå¶æ•°ä¸”å›¾è¿é€šï¼‰");
        return true;
    }
    
    // æ‰“å°å›¾ä¿¡æ¯
    printGraphInfo() {
        console.log("\n" + "=".repeat(50));
        console.log("å›¾ç»“æ„åˆ†æ");
        console.log("=".repeat(50));
        
        // æ‰“å°æ‰€æœ‰é¡¶ç‚¹åº¦æ•°
        console.log("\né¡¶ç‚¹åº¦æ•°åˆ†å¸ƒ:");
        const degrees = {};
        for (let vertex in this.adjacencyList) {
            degrees[vertex] = this.getDegree(vertex);
            console.log(`  é¡¶ç‚¹ ${vertex}: åº¦ = ${degrees[vertex]}`);
        }
        
        // è¿é€šæ€§åˆ†æ
        console.log("\nè¿é€šæ€§åˆ†æ:");
        console.log(`  æ˜¯å¦è¿é€š: ${this.isConnected()}`);
        const components = this.getConnectedComponents();
        console.log(`  è¿é€šåˆ†é‡: ${JSON.stringify(components)}`);
        
        // è¾¹ä¿¡æ¯
        console.log(`\nå›¾ç»Ÿè®¡:`);
        console.log(`  æ€»é¡¶ç‚¹æ•°: ${Object.keys(this.adjacencyList).length}`);
        console.log(`  æ€»è¾¹æ•°: ${this.edges.size}`);
        
        // æ¬§æ‹‰æ€§è´¨åˆ¤æ–­
        console.log("\næ¬§æ‹‰æ€§è´¨åˆ¤æ–­:");
        this.hasEulerianPath();
        this.hasEulerianCircuit();
        
        console.log("=".repeat(50));
    }
}

// ========== æµ‹è¯•ç”¨ä¾‹ ==========

console.log("ğŸ å¼€å§‹å›¾è®ºæµ‹è¯•...");

// æµ‹è¯•1ï¼šç»å…¸çš„4ä¸ªé¡¶ç‚¹å…¨è¿é€šï¼Œæ¯ä¸ªé¡¶ç‚¹åº¦æ•°ä¸º6ï¼ˆæ¬§æ‹‰å›è·¯ï¼‰
console.log("\nğŸ§ª æµ‹è¯•1: 4é¡¶ç‚¹å…¨è¿é€šï¼Œæ¯ä¸ªåº¦æ•°ä¸º6ï¼ˆæ¬§æ‹‰å›è·¯ï¼‰");
const graph1 = new ProfessionalGraph();

// åˆ›å»º4ä¸ªé¡¶ç‚¹ï¼šA, B, C, D å…¨è¿é€š
// æ¯ä¸ªé¡¶ç‚¹åˆ°å…¶ä»–3ä¸ªé¡¶ç‚¹éƒ½æœ‰2æ¡è¾¹ â†’ åº¦æ•° = 3 Ã— 2 = 6

// Açš„è¿æ¥
graph1.addEdge('e1', 'A', 'B', 1);
graph1.addEdge('e2', 'A', 'B', 1); // å¹³è¡Œè¾¹
graph1.addEdge('e3', 'A', 'C', 1);
graph1.addEdge('e4', 'A', 'C', 1); // å¹³è¡Œè¾¹
graph1.addEdge('e5', 'A', 'D', 1);
graph1.addEdge('e6', 'A', 'D', 1); // å¹³è¡Œè¾¹

// Bçš„è¿æ¥ï¼ˆé™¤äº†A-Bå·²ç»å»ºç«‹ï¼Œè¿˜éœ€è¦B-C, B-Dï¼‰
graph1.addEdge('e7', 'B', 'C', 1);
graph1.addEdge('e8', 'B', 'C', 1); // å¹³è¡Œè¾¹
graph1.addEdge('e9', 'B', 'D', 1);
graph1.addEdge('e10', 'B', 'D', 1); // å¹³è¡Œè¾¹

// Cçš„è¿æ¥ï¼ˆé™¤äº†A-C, B-Cå·²ç»å»ºç«‹ï¼Œè¿˜éœ€è¦C-Dï¼‰
graph1.addEdge('e11', 'C', 'D', 1);
graph1.addEdge('e12', 'C', 'D', 1); // å¹³è¡Œè¾¹

graph1.printGraphInfo();

// æµ‹è¯•2ï¼šéè¿é€šå›¾
console.log("\nğŸ§ª æµ‹è¯•2: éè¿é€šå›¾");
const graph2 = new ProfessionalGraph();

// åˆ†é‡1: ä¸‰è§’å½¢
graph2.addEdge('e1', 'A', 'B', 1);
graph2.addEdge('e2', 'B', 'C', 1);
graph2.addEdge('e3', 'C', 'A', 1);

// åˆ†é‡2: çº¿æ®µ
graph2.addEdge('e4', 'D', 'E', 1);

// å­¤ç«‹ç‚¹
graph2.addVertex('F');

graph2.printGraphInfo();

// æµ‹è¯•3ï¼šæ¬§æ‹‰è·¯å¾„ï¼ˆ2ä¸ªå¥‡åº¦é¡¶ç‚¹ï¼‰
console.log("\nğŸ§ª æµ‹è¯•3: æ¬§æ‹‰è·¯å¾„ï¼ˆ2ä¸ªå¥‡åº¦é¡¶ç‚¹ï¼‰");
const graph3 = new ProfessionalGraph();

// åˆ›å»ºä¸€æ¡è·¯å¾„ï¼šA-B-C-Dï¼ŒAå’ŒDåº¦æ•°ä¸º1ï¼ˆå¥‡æ•°ï¼‰ï¼ŒBå’ŒCåº¦æ•°ä¸º2ï¼ˆå¶æ•°ï¼‰
graph3.addEdge('e1', 'A', 'B', 1);
graph3.addEdge('e2', 'B', 'C', 1);
graph3.addEdge('e3', 'C', 'D', 1);

graph3.printGraphInfo();

// æµ‹è¯•4ï¼šéªŒè¯æˆ‘ä»¬çš„"2-3-3-4"ä¾‹å­
console.log("\nğŸ§ª æµ‹è¯•4: 2-3-3-4åº¦æ•°åˆ†å¸ƒ");
const graph4 = new ProfessionalGraph();

// åˆ›å»º2-3-3-4åº¦æ•°åˆ†å¸ƒ
graph4.addEdge('e1', 'A', 'B', 1);
graph4.addEdge('e2', 'A', 'C', 1);      // A:åº¦2

graph4.addEdge('e3', 'B', 'C', 1);
graph4.addEdge('e4', 'B', 'D', 1);      // B:åº¦3

graph4.addEdge('e5', 'C', 'D', 1);      // C:åº¦3

// è®©Dåº¦æ•°ä¸º4ï¼šæ·»åŠ è‡ªç¯ï¼ˆè‡ªç¯ç®—2åº¦ï¼‰
graph4.addEdge('e6', 'D', 'D', 1);      // D:åº¦4

graph4.printGraphInfo();

// éªŒè¯åº¦æ•°
console.log("\nâœ… åº¦æ•°éªŒè¯:");
console.log(`Açš„åº¦æ•°: ${graph4.getDegree('A')} (ç›®æ ‡: 2)`);
console.log(`Bçš„åº¦æ•°: ${graph4.getDegree('B')} (ç›®æ ‡: 3)`);
console.log(`Cçš„åº¦æ•°: ${graph4.getDegree('C')} (ç›®æ ‡: 3)`);
console.log(`Dçš„åº¦æ•°: ${graph4.getDegree('D')} (ç›®æ ‡: 4)`);

console.log("\nğŸ‰ æ‰€æœ‰æµ‹è¯•å®Œæˆï¼");
```